webpackJsonp([22],{Co1W:function(e,t){},vnlz:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{uncheck:!1,check:!0,noimg:l("Vmam"),input:"",total_page:1,options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],choose:[{value:"1",label:"上架"},{value:"2",label:"下架"}],value:"",values:"",type:"",multipleSelection:[],courelist:[],set:[{value:"1",label:"批量上架"},{value:"2",label:"批量下架"},{value:"3",label:"批量删除"}]}},created:function(){this.getCourelist(1)},methods:{getCourelist:function(e){var t=this,l=this.$host+"admin/course";this.axios.get(l,{params:{pageSize:10,page:e,keyword:this.input,sid:this.type,is_putaway:this.values}}).then(function(e){if(console.log(e),200==e.status){var l=e.data;t.courelist=l.result,t.total_page=l.total_number}else t.$message.error("网络错误！请稍后重试！")})},ban:function(e,t){var l=this,a={course_id:e.course_id,mtype:t,val:e.sort},s=this.$host+"admin/course/edit_course";this.axios.post(s,a).then(function(e){if(200==e.status){e.data;l.$message({message:"操作成功",type:"success"}),l.getCourelist(1)}else l.$message.error("网络错误！请稍后重试！")})},serch:function(){this.getCourelist(1)},select:function(){this.getCourelist(1)},sure:function(){var e=this;console.log(this.value);var t={course_id:this.multipleSelection,mtype:this.value},l=this.$host+"admin/course/batch_course";this.axios.post(l,t).then(function(t){if(console.log(t),200==t.status){if(1==t.data.code){t.data;e.$message({message:"操作成功",type:"success"}),e.getCourelist(1)}}else e.$message.error("网络错误！请稍后重试！")})},del:function(e){var t=this,l={course_id:e};console.log(l);var a=this.$host+"admin/course/delete_course";this.axios.post(a,l).then(function(e){if(console.log(e),200==e.status){var l=e.data;t.$message({message:l.msg,type:"success"}),t.getCourelist(1)}else t.$message.error("网络错误！请稍后重试！")})},handleSizeChange:function(e){},handleCurrentChange:function(e){this.getCourelist(e)},handleSelectionChange:function(e){this.multipleSelection=[];for(var t=0;t<e.length;t++)this.multipleSelection.push(e[t].course_id)},add:function(){this.$router.push({path:"/addcoure",query:{id:""}})},edit:function(e){this.$router.push({path:"/addcoure",query:{id:e}})}}},s={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"courelist"},[l("div",{staticClass:"content bg-f padding-24"},[l("div",{staticClass:"top space-between"},[l("div",{staticClass:"center-col left"},[l("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:" 请输入您要搜索的内容"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}},[l("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.serch()}},slot:"append"})],1),e._v(" "),l("div",{staticClass:"center-col",staticStyle:{"margin-left":"20px"}},[l("p",[e._v("筛选类型：")]),e._v(" "),l("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.select(e.type)}},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[l("el-option",{key:"",attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.options,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),l("div",{staticClass:"center-col",staticStyle:{"margin-left":"20px"}},[l("p",[e._v("筛选状态：")]),e._v(" "),l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.values,callback:function(t){e.values=t},expression:"values"}},[l("el-option",{key:"",attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.choose,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)],1)],1),e._v(" "),l("div",{staticClass:"add btn color-f bg-active",on:{click:e.add}},[e._v("添加")])]),e._v(" "),l("div",{staticClass:"list"},[l("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.courelist,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),l("el-table-column",{attrs:{label:"封面",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("img",{staticClass:"sq",attrs:{src:t.row.course_cover[0]?t.row.course_cover[0]:e.noimg,alt:""}})]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"course_name",label:"名称"}}),e._v(" "),l("el-table-column",{attrs:{label:"类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.course_types,function(t,a){return l("p",{key:a},[e._v(e._s(t.cate_name))])})}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"course_number",label:"课时",width:"60"}}),e._v(" "),l("el-table-column",{attrs:{prop:"course_level",label:"难度",width:"60"}}),e._v(" "),l("el-table-column",{attrs:{prop:"unit_price",label:"单价",width:"80"}}),e._v(" "),l("el-table-column",{attrs:{prop:"total_price",label:"总价",width:"80"}}),e._v(" "),l("el-table-column",{attrs:{prop:"created_at",label:"添加时间",width:"180"}}),e._v(" "),l("el-table-column",{attrs:{label:"排序",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("input",{directives:[{name:"model",rawName:"v-model",value:t.row.sort,expression:"scope.row.sort"}],staticClass:"sort",staticStyle:{width:"50px"},attrs:{type:"text"},domProps:{value:t.row.sort},on:{change:function(l){return e.ban(t.row,1)},input:function(l){l.target.composing||e.$set(t.row,"sort",l.target.value)}}})]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"操作",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("div",{staticClass:"space-around"},[l("div",{staticClass:"btn active",on:{click:function(l){return e.edit(t.row.course_id)}}},[e._v("编辑")]),e._v(" "),1==t.row.is_putaway?l("div",{staticClass:"btn del",on:{click:function(l){return e.ban(t.row,2)}}},[e._v("下架")]):e._e(),e._v(" "),2==t.row.is_putaway?l("div",{staticClass:"btn active",on:{click:function(l){return e.ban(t.row,4)}}},[e._v("上架")]):e._e(),e._v(" "),l("div",{staticClass:"btn del",on:{click:function(l){return e.del(t.row.course_id)}}},[e._v("删除")])]),e._v(" "),0==t.row.is_integral?l("div",[l("el-checkbox",{attrs:{checked:e.uncheck},on:{change:function(l){return e.ban(t.row,3)}}},[e._v("积分")])],1):l("div",[l("el-checkbox",{attrs:{checked:e.check},on:{change:function(l){return e.ban(t.row,5)}}},[e._v("积分")])],1)]}}])})],1)],1),e._v(" "),l("div",{staticClass:"space-between"},[l("div",{staticClass:"center-col"},[l("p",[e._v("批量操作：")]),e._v(" "),l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.set,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),l("div",{staticClass:"btn sure",on:{click:e.sure}},[e._v("确认")])],1),e._v(" "),l("el-pagination",{attrs:{"page-size":10,layout:"total, prev, pager, next",total:e.total_page},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])},staticRenderFns:[]};var o=l("VU/8")(a,s,!1,function(e){l("Co1W")},null,null);t.default=o.exports}});
//# sourceMappingURL=22.81505d2654fc852a1286.js.map