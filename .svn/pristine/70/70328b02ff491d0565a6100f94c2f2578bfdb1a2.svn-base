webpackJsonp([20],{DnBs:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={data:function(){return{cityList:[],total_page:1}},created:function(){this.getCitylist(1)},methods:{getCitylist:function(t){var e=this,s=this.$host+"admin/city";this.axios.get(s,{params:{pageSize:10,page:t}}).then(function(t){if(console.log(t),200==t.status){var s=t.data;e.cityList=s.result,e.total_page=s.total_number}else e.$message.error("网络错误！请稍后重试！")})},add:function(){var t=this,e=this.$host+"admin/city/add_city";this.axios.post(e).then(function(e){t.$message({message:"添加成功！",type:"success"}),t.getCitylist(1)}).catch(function(t){console.log(t)})},del:function(t){var e=this,s={city_id:t},a=this.$host+"admin/city/delete_city";this.axios.post(a,s).then(function(t){if(200==t.status){console.log(t);var s=t.data;1==s.code?(e.$message({message:s.msg,type:"success"}),e.getCitylist(1),e.cityList=s.result,e.total_page=s.total_number):e.$message({message:s.msg,type:"success"})}else e.$message.error("网络错误！请稍后重试！")})},change:function(t,e){var s=this,a="";a=1==e?t.city_name:t.sort;var i={city_id:t.id,mtype:e,val:a},n=this.$host+"admin/city/edit_city";this.axios.post(n,i).then(function(t){if(200==t.status){console.log(t);var e=t.data;1==e.code?(s.$message({message:e.msg,type:"success"}),s.getCitylist(1),s.cityList=e.result,s.total_page=e.total_number):s.$message({message:e.msg,type:"success"})}else s.$message.error("网络错误！请稍后重试！")})},handleSizeChange:function(t){},handleCurrentChange:function(t){this.getCitylist(t)}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"city"},[s("div",{staticClass:"content bg-f padding-24"},[s("div",{staticClass:"top space-between"},[s("div",{staticClass:"center-col left"},[t._v("城市管理")]),t._v(" "),s("div",{staticClass:"add btn color-f bg-active",on:{click:t.add}},[t._v("添加")])]),t._v(" "),s("div",{staticClass:"list"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.cityList,stripe:"",border:""}},[s("el-table-column",{attrs:{type:"index",width:"100",label:"序号"}}),t._v(" "),s("el-table-column",{attrs:{label:"城市名"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("input",{directives:[{name:"model",rawName:"v-model",value:e.row.city_name,expression:"scope.row.city_name"}],staticClass:"sort",attrs:{type:"text"},domProps:{value:e.row.city_name},on:{change:function(s){return t.change(e.row,1)},input:function(s){s.target.composing||t.$set(e.row,"city_name",s.target.value)}}})]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"排序"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("input",{directives:[{name:"model",rawName:"v-model",value:e.row.sort,expression:"scope.row.sort"}],staticClass:"sort",attrs:{type:"text"},domProps:{value:e.row.sort},on:{change:function(s){return t.change(e.row,2)},input:function(s){s.target.composing||t.$set(e.row,"sort",s.target.value)}}})]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"btn del",on:{click:function(s){return t.del(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),s("el-pagination",{attrs:{"page-size":10,layout:"total, prev, pager, next",total:t.total_page},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var n=s("VU/8")(a,i,!1,function(t){s("Gsel")},null,null);e.default=n.exports},Gsel:function(t,e){}});
//# sourceMappingURL=20.078eaba35ce1c9c81f96.js.map