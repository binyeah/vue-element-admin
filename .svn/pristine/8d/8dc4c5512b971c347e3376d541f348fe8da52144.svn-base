webpackJsonp([10],{tTze:function(e,t){},vnlz:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{uncheck:!1,check:!0,noimg:s("Vmam"),input:"",total_page:1,options:[],choose:[{value:"1",label:"上架"},{value:"2",label:"下架"}],value:"",values:"",type:"",multipleSelection:[],courelist:[],set:[{value:"1",label:"批量上架"},{value:"2",label:"批量下架"},{value:"3",label:"批量删除"}]}},created:function(){this.getCourelist(1),this.gettypes()},methods:{gettypes:function(){var e=this,t=this.$host+"admin/cate/second_cate";this.axios.get(t).then(function(t){if(console.log(t),200==t.status){var s=t.data;e.options=s.goods_cate}else e.$message.error("网络错误！请稍后重试！")})},getCourelist:function(e){var t=this,s=this.$host+"admin/course";this.axios.get(s,{params:{pageSize:10,page:e,keyword:this.input,sid:this.type,is_putaway:this.values}}).then(function(e){if(console.log(e),200==e.status){var s=e.data;t.courelist=s.result,t.total_page=s.total_number}else t.$message.error("网络错误！请稍后重试！")})},ban:function(e,t){var s=this,a={course_id:e.course_id,mtype:t,val:e.sort},l=this.$host+"admin/course/edit_course";this.axios.post(l,a).then(function(e){if(200==e.status){e.data;s.$message({message:"操作成功",type:"success"}),s.getCourelist(1)}else s.$message.error("网络错误！请稍后重试！")})},serch:function(){this.getCourelist(1)},select:function(){this.getCourelist(1)},sure:function(){var e=this;console.log(this.value);var t={course_id:this.multipleSelection,mtype:this.value},s=this.$host+"admin/course/batch_course";this.axios.post(s,t).then(function(t){if(console.log(t),200==t.status){if(1==t.data.code){t.data;e.$message({message:"操作成功",type:"success"}),e.getCourelist(1)}}else e.$message.error("网络错误！请稍后重试！")})},del:function(e){var t=this,s={course_id:e};console.log(s);var a=this.$host+"admin/course/delete_course";this.axios.post(a,s).then(function(e){if(console.log(e),200==e.status){var s=e.data;t.$message({message:s.msg,type:"success"}),t.getCourelist(1)}else t.$message.error("网络错误！请稍后重试！")})},status:function(){this.getCourelist(1)},handleSizeChange:function(e){},handleCurrentChange:function(e){this.getCourelist(e)},handleSelectionChange:function(e){this.multipleSelection=[];for(var t=0;t<e.length;t++)this.multipleSelection.push(e[t].course_id)},add:function(){this.$router.push({path:"/addcoure",query:{id:""}})},edit:function(e){this.$router.push({path:"/addcoure",query:{id:e}})}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"courelist"},[s("div",{staticClass:"content bg-f padding-24"},[s("div",{staticClass:"top space-between"},[s("div",{staticClass:"center-col left"},[s("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:" 请输入您要搜索的内容"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.serch()}},slot:"append"})],1),e._v(" "),s("div",{staticClass:"center-col",staticStyle:{"margin-left":"20px"}},[s("p",[e._v("筛选类型：")]),e._v(" "),s("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.select()}},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[s("el-option",{key:"",attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.options,function(e){return s("el-option",{key:e.id,attrs:{label:e.cate_name,value:e.id}})})],2)],1),e._v(" "),s("div",{staticClass:"center-col",staticStyle:{"margin-left":"20px"}},[s("p",[e._v("筛选状态：")]),e._v(" "),s("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.status(e.values)}},model:{value:e.values,callback:function(t){e.values=t},expression:"values"}},[s("el-option",{key:"",attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.choose,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)],1)],1),e._v(" "),s("div",{staticClass:"add btn color-f bg-active",on:{click:e.add}},[e._v("添加")])]),e._v(" "),s("div",{staticClass:"list"},[s("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.courelist,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),s("el-table-column",{attrs:{label:"封面",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("img",{staticClass:"sq",attrs:{src:t.row.course_cover[0]?t.row.course_cover[0]:e.noimg,alt:""}})]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"course_name",label:"名称"}}),e._v(" "),s("el-table-column",{attrs:{label:"类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.course_types,function(t,a){return s("p",{key:a},[e._v(e._s(t.cate_name))])})}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"course_number",label:"课时",width:"60"}}),e._v(" "),s("el-table-column",{attrs:{prop:"course_level",label:"难度",width:"60"}}),e._v(" "),s("el-table-column",{attrs:{prop:"unit_price",label:"单价",width:"80"}}),e._v(" "),s("el-table-column",{attrs:{prop:"total_price",label:"总价",width:"80"}}),e._v(" "),s("el-table-column",{attrs:{prop:"created_at",label:"添加时间",width:"180"}}),e._v(" "),s("el-table-column",{attrs:{label:"排序",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.row.sort,expression:"scope.row.sort"}],staticClass:"sort",staticStyle:{width:"50px"},attrs:{type:"text"},domProps:{value:t.row.sort},on:{change:function(s){return e.ban(t.row,1)},input:function(s){s.target.composing||e.$set(t.row,"sort",s.target.value)}}})]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"space-around"},[s("div",{staticClass:"btn active",on:{click:function(s){return e.edit(t.row.course_id)}}},[e._v("编辑")]),e._v(" "),1==t.row.is_putaway?s("div",{staticClass:"btn del",on:{click:function(s){return e.ban(t.row,2)}}},[e._v("下架")]):e._e(),e._v(" "),2==t.row.is_putaway?s("div",{staticClass:"btn active",on:{click:function(s){return e.ban(t.row,4)}}},[e._v("上架")]):e._e(),e._v(" "),s("div",{staticClass:"btn del",on:{click:function(s){return e.del(t.row.course_id)}}},[e._v("删除")])]),e._v(" "),0==t.row.is_integral?s("div",[s("el-checkbox",{attrs:{checked:e.uncheck},on:{change:function(s){return e.ban(t.row,3)}}},[e._v("积分")])],1):s("div",[s("el-checkbox",{attrs:{checked:e.check},on:{change:function(s){return e.ban(t.row,5)}}},[e._v("积分")])],1)]}}])})],1)],1),e._v(" "),s("div",{staticClass:"space-between"},[s("div",{staticClass:"center-col"},[s("p",[e._v("批量操作：")]),e._v(" "),s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.set,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),s("div",{staticClass:"btn sure",on:{click:e.sure}},[e._v("确认")])],1),e._v(" "),s("el-pagination",{attrs:{"page-size":10,layout:"total, prev, pager, next",total:e.total_page},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])},staticRenderFns:[]};var o=s("VU/8")(a,l,!1,function(e){s("tTze")},null,null);t.default=o.exports}});
//# sourceMappingURL=10.17dd7cd030308e0b376d.js.map