webpackJsonp([12],{"9r7s":function(t,e){},nDIw:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sliderImg"},[s("div",{staticClass:"content bg-f padding-24"},[s("div",{staticClass:"top space-between"},[t._m(0),t._v(" "),s("div",{staticClass:"add btn color-f bg-active",on:{click:t.add}},[t._v("添加")])]),t._v(" "),s("div",{staticClass:"list"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.sliderList,stripe:"",border:""}},[s("el-table-column",{attrs:{type:"index",width:"100",label:"序号"}}),t._v(" "),s("el-table-column",{attrs:{label:"图片",width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[s("img",{staticClass:"long",attrs:{src:t.row.slide_cover,alt:""}})]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"链接",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("input",{directives:[{name:"model",rawName:"v-model",value:e.row.slide_url,expression:"scope.row.slide_url"}],staticClass:"links",attrs:{type:"text"},domProps:{value:e.row.slide_url},on:{change:function(s){return t.change(e.row,1)},input:function(s){s.target.composing||t.$set(e.row,"slide_url",s.target.value)}}})]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"排序",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("input",{directives:[{name:"model",rawName:"v-model",value:e.row.sort,expression:"scope.row.sort"}],staticClass:"sort",attrs:{type:"text"},domProps:{value:e.row.sort},on:{change:function(s){return t.change(e.row,2)},input:function(s){s.target.composing||t.$set(e.row,"sort",s.target.value)}}})]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"btn del",on:{click:function(s){return t.del(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),s("el-pagination",{attrs:{"page-size":10,layout:"total, prev, pager, next",total:t.total_page},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),s("div",{staticClass:"addbox"},[s("el-dialog",{attrs:{title:"添加广告图",visible:t.addbox},on:{"update:visible":function(e){t.addbox=e}}},[s("div",{staticClass:"imgbox"},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://test.izhixiu.cn/www/yoga/upload_file","show-file-list":!1,"on-success":t.handleAvatarSuccess1}},[t.imageUrl?s("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.addbox=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.sure()}}},[t._v("确 定")])],1)])],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"center-col left"},[this._v("轮播图管理"),e("span",[this._v("(建议尺寸：750*534)")])])}]};var i=s("VU/8")({data:function(){return{addbox:!1,imageUrl:"",total_page:1,sliderList:[]}},created:function(){this.getSliderlist(1)},methods:{getSliderlist:function(t){var e=this,s=this.$host+"admin/slide";this.axios.get(s,{params:{pageSize:10,page:t}}).then(function(t){if(200==t.status){var s=t.data;e.sliderList=s.result,e.total_page=s.total_number}else e.$message.error("网络错误！请稍后重试！")})},del:function(t){var e=this,s=this.$host+"admin/slide/delete_slide",a={slide_id:t};this.axios.post(s,a).then(function(t){var s=t.data;200==t.status&&1==s.code?(e.$message({message:s.msg,type:"success"}),e.getSliderlist(1)):e.$message({message:"操作失败！请重试",type:"warning"})}).catch(function(t){e.$message({message:"操作失败！请重试",type:"warning"})})},add:function(){this.imageUrl="",this.addbox=!0},sure:function(){var t=this;if(this.imageUrl){var e=this.$host+"admin/slide/add_slide",s={slide_cover:this.imageUrl};this.axios.post(e,s).then(function(e){200==e.status?(t.$message({message:"上传成功！",type:"success"}),t.addbox=!1,t.getSliderlist(1)):t.$message({message:"上传失败！请重试",type:"warning"})}).catch(function(e){t.$message({message:"上传失败！请重试",type:"warning"})})}else this.$message({message:"图片不能为空！",type:"warning"})},change:function(t,e){var s=this,a="";1==e?a=t.slide_url:2==e&&(a=t.sort);var i=this.$host+"admin/slide/edit_slide",n={slide_id:t.id,mtype:e,val:a};this.axios.post(i,n).then(function(t){var e=t.data;200==t.status&&1==e.code?(s.$message({message:e.msg,type:"success"}),s.getSliderlist()):s.$message({message:"操作失败！请重试",type:"warning"})}).catch(function(t){s.$message({message:"操作失败！请重试",type:"warning"})})},handleAvatarSuccess1:function(t){this.imageUrl=t.dest},handleSizeChange:function(t){},handleCurrentChange:function(t){this.getSliderlist(t)}}},a,!1,function(t){s("9r7s")},null,null);e.default=i.exports}});
//# sourceMappingURL=12.78c2cc43b0f3bcdf70be.js.map