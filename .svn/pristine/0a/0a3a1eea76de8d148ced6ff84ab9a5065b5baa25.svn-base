webpackJsonp([14],{FDH9:function(e,t){},Y9YJ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("162o"),r={data:function(){return{auths:[],id:"",ruleForm:{account:"",password:""},right:[],defaultProps:{children:"children",label:"label"},rules:{account:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},created:function(){this.id=this.$route.query.id,this.getright(),this.editAccounts(this.id)},mounted:function(){this.setCheckedKeys()},methods:{save:function(){for(var e=this,t=this.$refs.tree.getCheckedKeys(),s=0;s<t.length;s++)t[s]=Number(t[s]);if(this.ruleForm.account)if(this.ruleForm.password)if(t[0]){var r=this.$host+"admin/save_admin",i={id:this.id,admin_account:this.ruleForm.account,admin_password:this.ruleForm.password,auths:t};this.axios.post(r,i).then(function(t){200==t.status&&(1==t.data.code?(e.$message({message:"保存成功！",type:"success"}),Object(a.setTimeout)(function(){e.$router.push("/accountlist")},500)):e.$message({message:t.data.msg,type:"warning"}))}).catch(function(e){console.log(e)})}else this.$message.error("权限不能为空！");else this.$message.error("密码不能为空！");else this.$message.error("账号不能为空！")},getright:function(){var e=this,t=this.$host+"admin/get_modular";this.axios.get(t).then(function(t){e.right=t.data}).catch(function(e){console.log(e)})},editAccounts:function(e){var t=this,s=this.$host+"admin/edit_admin?id="+e;this.axios.get(s).then(function(e){if(200==e.status){var s=e.data;t.ruleForm.account=s.admin_account,t.ruleForm.password=s.admin_password,t.auths=s.auths;for(var a=0;a<t.auths.length;a++)t.auths[a]=Number(t.auths[a].auth_mod_id);t.setCheckedKeys()}else t.$message({message:"网络错误！",type:"warning"})}).catch(function(e){t.$message({message:"网络错误！",type:"warning"}),console.log(e)})},setCheckedKeys:function(){var e=this.auths;this.$refs.tree.setCheckedKeys(e)}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"addacount"},[s("div",{staticClass:"content bg-f"},[s("div",{staticClass:"top space-between  padding-24"},[s("p",{staticClass:"fs-16"},[e._v("编辑信息")]),e._v(" "),s("div",{staticClass:"bg-active color-f save btn",on:{click:e.save}},[e._v("保存")])]),e._v(" "),s("div",{staticClass:"tabel padding-24"},[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"200px"}},[s("el-form-item",{attrs:{label:"账号：",prop:"account"}},[s("el-input",{staticStyle:{width:"400px"},model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account",t)},expression:"ruleForm.account"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码：",prop:"password"}},[s("el-input",{staticStyle:{width:"400px"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"权限："}},[s("div",{staticClass:"tree"},[s("el-tree",{ref:"tree",attrs:{data:e.right,"show-checkbox":"","node-key":"mod_id","default-expand-all":"","highlight-current":"",props:e.defaultProps}})],1)])],1)],1)])])},staticRenderFns:[]};var o=s("VU/8")(r,i,!1,function(e){s("FDH9")},null,null);t.default=o.exports}});
//# sourceMappingURL=14.cb171e5d891484f2c52f.js.map